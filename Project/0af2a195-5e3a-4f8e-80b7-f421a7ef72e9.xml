{"CLs":[{"__type":"IST","EID":"c98a36da-7c52-4de1-aeb6-3407d174c423","H":130,"TXT":"\/\/ Initial settings for tests\u000d\u000asetTCPAcceptTimeOut := 0;\u000d\u000aSetNoDelayOnOff := FALSE;","W":400}],"LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"IST","EID":"67ab30a2-d602-4364-9fca-39670fd0ee3b","H":547.33333333333348,"TXT":"\/\/TCP Status loop\u000d\u000a(*\u000d\u000a\u0009TODO:\u000d\u000a\u0009\u0009Maybe some delay between loops? reduce CPU load\u000d\u000a*)\u000d\u000a\u000d\u000aCASE tcpStatusLoop OF\u000d\u000a    0 : \u000d\u000a\u0009\u0009getTCPStatus := FALSE;\u000d\u000a\u0009\u0009tcpStatusLoop :=5;\u000d\u000a\u0009\u0009\u000d\u000a\u00095: \u000d\u000a\u0009\u0009IF NOT  InstGetTCPStatus.Busy THEN\u000d\u000a\u0009\u0009\u0009tcpStatusLoop := 10;\u000d\u000a\u0009\u0009END_IF;\u000d\u000a\u0009\u0009\u000d\u000a\u000910:\u000d\u000a\u0009\u0009getTCPStatus := TRUE;\u000d\u000a\u0009\u0009tcpStatusLoop := 15;\u000d\u000a\u0009\u0009\u000d\u000a\u000915: \u000d\u000a\u0009\u0009IF InstGetTCPStatus.Done THEN\u000d\u000a\u0009\u0009\u0009tcpStatusLoop := 0;\u000d\u000a\u0009\u0009ELSIF InstGetTCPStatus.Error THEN\u000d\u000a\u0009\u0009\u0009tcpStatusLoop := 0;\u000d\u000a\u0009\u0009\u0009\u000d\u000a\u0009\u0009END_IF;\u000d\u000a\u0009\u0009\u0009\u000d\u000aELSE\u000d\u000a   tcpStatusLoop := 0; \u000d\u000aEND_CASE;","W":687.33333333333337}],"CMT":"Loop To read Status","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"setEnableServer"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"SrcTcpPort","Ix":1,"Type":"UINT","Var":"setSrcTCPPort"},{"__type":"PRM","Arg":"TimeOut","Ix":2,"Type":"UINT","Var":"setTCPAcceptTimeOut"}],"Ix":7,"Name":"SktTCPAccept","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":3,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":4,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":5,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"Socket","Ix":6,"Type":"_sSOCKET","Var":""}],"X":1,"Var":"InstTCPAccept"}],"CMT":"TCP Server FB","LRI":8,"RRI":9,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"setCloseServer"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Socket","Ix":1,"Type":"_sSOCKET","Var":"InstTCPAccept.Socket"}],"Ix":5,"Name":"SktClose","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":2,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":3,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":4,"Type":"WORD","Var":""}],"X":1,"Var":"InstTCPClose"}],"LRI":6,"RRI":7,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"setSktTCP_NODELAY"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Socket","Ix":1,"Type":"_sSOCKET","Var":"InstTCPAccept.Socket"},{"__type":"PRM","Arg":"OptionType","Ix":2,"Type":"_eSKT_OPTION_TYPE","Var":"_eSKT_OPTION_TYPE#_TCP_NODELAY"},{"__type":"PRM","Arg":"OptionParam","Ix":3,"Type":"ANY","Var":"SetNoDelayOnOff"}],"Ix":7,"Name":"SktSetOption","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":4,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":5,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":6,"Type":"WORD","Var":""}],"X":1,"Var":"InstTCPNoDelay"}],"CMT":"FB to enable NoDelay","LRI":8,"RRI":9,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"setClearBuffer"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Socket","Ix":1,"Type":"_sSOCKET","Var":"InstTCPAccept.Socket"}],"Ix":5,"Name":"SktClearBuf","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":2,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":3,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":4,"Type":"WORD","Var":""}],"X":1,"Var":"InstClearBuffer"}],"CMT":"Clear Buffer FB","LRI":6,"RRI":7,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"getTCPStatus"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Socket","Ix":1,"Type":"_sSOCKET","Var":"InstTCPAccept.Socket"}],"Ix":7,"Name":"SktGetTCPStatus","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":2,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":3,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":4,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"TcpStatus","Ix":5,"Type":"_eCONNECTION_STATE","Var":""},{"__type":"PRM","Arg":"DatRcvFlag","Ix":6,"Type":"BOOL","Var":""}],"X":1,"Var":"InstGetTCPStatus"},{"__type":"IST","EID":"c924e5d5-9bb6-46d0-9267-813362fa4f95","H":73.333333333333371,"Ix":8,"TXT":"getConnectionStatus \u0009:= InstGetTCPStatus.TcpStatus;\u000d\u000agetDataRcvFlag \u0009\u0009\u0009:= InstGetTCPStatus.DatRcvFlag;","W":599.33333333333326,"X":2}],"CMT":"Get connection status ","LRI":9,"RRI":10,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"setSend"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Socket","Ix":1,"Type":"_sSOCKET","Var":"InstTCPAccept.Socket"},{"__type":"PRM","Arg":"SendDat","Ix":2,"Type":"BYTE[]","Var":"setSendData[0]"},{"__type":"PRM","Arg":"Size","Ix":3,"Type":"UINT","Var":"setSendSize"}],"Ix":7,"Name":"SktTCPSend","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":4,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":5,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":6,"Type":"WORD","Var":""}],"X":1,"Var":"InstSetSend"}],"CMT":"Set send data to Client","LRI":8,"RRI":9,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"setRcvData"},{"__type":"FB","In":[{"__type":"PF","Arg":"Execute"},{"__type":"PRM","Arg":"Socket","Ix":1,"Type":"_sSOCKET","Var":"InstTCPAccept.Socket"},{"__type":"PRM","Arg":"TimeOut","Ix":2,"Type":"UINT","Var":""},{"__type":"PRM","Arg":"Size","Ix":3,"Type":"UINT","Var":"setRcvSize"},{"__type":"PRM","Arg":"RcvDat","IO":true,"Ix":4,"Type":"BYTE[]","Var":"getRcvData[0]"}],"Ix":10,"Name":"SktTCPRcv","Out":[{"__type":"PF","Arg":"Done"},{"__type":"PRM","Arg":"Busy","Ix":5,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"Error","Ix":6,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"ErrorID","Ix":7,"Type":"WORD","Var":""},{"__type":"PRM","Arg":"RcvDat","IO":true,"Ix":8,"Type":"BYTE[]","Var":"getRcvData[0]"},{"__type":"PRM","Arg":"RcvSize","Ix":9,"Type":"UINT","Var":"getRcvSize"}],"X":1,"Var":"InstGetRcv"}],"LRI":11,"RRI":12,"VLs":[]}
